spring:
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/authdb}
    username: ${DB_USER:auth_user}
    password: ${DB_PASS:auth_pass}
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate.jdbc.time_zone: UTC
    open-in-view: false
  flyway:
    schemas: ${DB_SCHEMA:auth}
    default-schema: ${DB_SCHEMA:auth}
    create-schemas: true
  mail:
    host: ${MAIL_HOST:smtp.gmail.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:}
    password: ${MAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID:}
            client-secret: ${GOOGLE_CLIENT_SECRET:}
            scope: openid, profile, email
          github:
            client-id: ${GITHUB_CLIENT_ID:}
            client-secret: ${GITHUB_CLIENT_SECRET:}
            scope: read:user, user:email
  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 5MB

server:
  port: 8080

app:
  issuer: ${AUTH_ISSUER:http://localhost:8080}
  jwks-url: ${AUTH_JWKS_URL:}
  audience: ${AUTH_AUDIENCE:offerhunt-api}
  security:
    enabled: true
    use-local-key: true
  oauth2:
    redirect: ${AUTH_OAUTH2_REDIRECT:http://localhost:3000/auth/callback}
    error-redirect: ${AUTH_OAUTH2_ERROR_REDIRECT:http://localhost:3000/auth/error}
  auth:
    password-reset:
      ttl-seconds: 3600
  password-reset:
    from: ${PASSWORD_RESET_FROM:${MAIL_USERNAME:}}
    subject: ${PASSWORD_RESET_SUBJECT:Восстановление пароля OfferHunt}
    base-url: ${AUTH_PASSWORD_RESET_BASE_URL:http://localhost:3000/auth/reset-password}

  avatar:
    storage: ${AVATAR_STORAGE:local}
    local:
      base-dir: ${AVATAR_LOCAL_DIR:./data/avatars}
